---

title: matrixify


keywords: fastai
sidebar: home_sidebar

summary: "Tools to convert detected/corrected poses to matrix representations"
description: "Tools to convert detected/corrected poses to matrix representations"
nb_path: "02_matrixify.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_matrixify.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="matrixify_pose" class="doc_header"><code>matrixify_pose</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/matrixify.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>matrixify_pose</code>(<strong><code>coords_and_confidence</code></strong>)</p>
</blockquote>
<p>DISTANCE MATRIX: compute a pose's L1-normed inter-keypoint distance matrix.
To compare any two poses, we can measure the degree of correlation between
their distance matrices via a statistical test, such as the Mantel test.
XXX It's not obvious that normalizing the matrix really makes a difference to
the final correlation comparison, but it doesn't seem to hurt, either...
Note that if the pose representation has 17 keypoints, then each pose instance
can be represented by a condensed distance matrix (or vector) of 136 elements.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_pose_matrix" class="doc_header"><code>get_pose_matrix</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/matrixify.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_pose_matrix</code>(<strong><code>frame</code></strong>, <strong><code>figure_index</code></strong>=<em><code>0</code></em>, <strong><code>figure_type</code></strong>=<em><code>'flipped_figures'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_laplacian_matrix" class="doc_header"><code>get_laplacian_matrix</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/matrixify.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_laplacian_matrix</code>(<strong><code>frame</code></strong>, <strong><code>normalized</code></strong>=<em><code>True</code></em>, <strong><code>show</code></strong>=<em><code>False</code></em>, <strong><code>figure_index</code></strong>=<em><code>0</code></em>, <strong><code>figure_type</code></strong>=<em><code>'flipped_figures'</code></em>)</p>
</blockquote>
<p>LAPLACIAN: compute the Delaunay triangulation between keypoints, then
use the connections to build an adjacency matrix, which is then converted
to its (normalized) Laplacian matrix (a single matrix that encapsulates the
degree of each node and the connections between the nodes). Then you can
subtract a pose's Laplacian from another's to get a measure of the degree of
similarity or difference between them.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compare_laplacians" class="doc_header"><code>compare_laplacians</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/matrixify.py#L82" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compare_laplacians</code>(<strong><code>p1</code></strong>, <strong><code>p2</code></strong>, <strong><code>figure_index</code></strong>=<em><code>0</code></em>, <strong><code>figure_type</code></strong>=<em><code>'flipped_figures'</code></em>, <strong><code>show</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

