---

title: analyze


keywords: fastai
sidebar: home_sidebar

summary: "Tools for computing movement/pose similarity time series, clustering for single- and multi-dancer videos"
description: "Tools for computing movement/pose similarity time series, clustering for single- and multi-dancer videos"
nb_path: "04_analyze.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 04_analyze.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="smooth_series" class="doc_header"><code>smooth_series</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/analyze.py#L28" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>smooth_series</code>(<strong><code>x</code></strong>, <strong><code>window_len</code></strong>=<em><code>11</code></em>, <strong><code>window</code></strong>=<em><code>'flat'</code></em>)</p>
</blockquote>
<p>Smooth a time series via a sliding window average
From <a href="https://scipy-cookbook.readthedocs.io/items/SignalSmooth.html">https://scipy-cookbook.readthedocs.io/items/SignalSmooth.html</a>
Generally used as a helper function to process_time_series() below.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="corr_time_series_matrix" class="doc_header"><code>corr_time_series_matrix</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/analyze.py#L61" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>corr_time_series_matrix</code>(<strong><code>pose_data</code></strong>, <strong><code>method</code></strong>=<em><code>'distance'</code></em>)</p>
</blockquote>
<p>Generate a full time-series pose similarity heatmap for all available
poses and frames from the video. This code can use either pose
characterization approach; in practice, the distance matrix-based analyses
take longer to calculate but are more accurate.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fill_nans_scipy1" class="doc_header"><code>fill_nans_scipy1</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/analyze.py#L100" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fill_nans_scipy1</code>(<strong><code>padata</code></strong>, <strong><code>pkind</code></strong>=<em><code>'linear'</code></em>)</p>
</blockquote>
<p>Fill in missing values from a time series, after the first non-NAN value
and up to the last non-NAN value. Note that scipy.interpolated.interp1d
provides a lot more options (splines, quadratic, etc.)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="movements_time_series" class="doc_header"><code>movements_time_series</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/analyze.py#L125" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>movements_time_series</code>(<strong><code>pose_data</code></strong>, <strong><code>pose_index</code></strong>=<em><code>-1</code></em>, <strong><code>method</code></strong>=<em><code>'distance'</code></em>, <strong><code>figure_type</code></strong>=<em><code>'flipped_figures'</code></em>, <strong><code>video_file</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Calculate a time series of the differences between each pair of poses in a
sequence. This works with a single figure (pose_index=0) or all the figures
in the video (pose_index=-1). It can be run on its own, but typically this is
a helper function for process_movement_series() (below).</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="process_movement_series" class="doc_header"><code>process_movement_series</code><a href="https://github.com/broadwell/choreo_k/tree/main/choreo_k/analyze.py#L185" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>process_movement_series</code>(<strong><code>pose_data</code></strong>, <strong><code>pose_index</code></strong>=<em><code>-1</code></em>, <strong><code>figure_type</code></strong>=<em><code>'flipped_figures'</code></em>, <strong><code>video_file</code></strong>=<em><code>None</code></em>, <strong><code>method</code></strong>=<em><code>'distance'</code></em>, <strong><code>interpolate</code></strong>=<em><code>True</code></em>, <strong><code>viz</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Smooth, summarize, visualize movement data for one or more figures across a
time series.
Also visualize aggregate movement data for each keypoint, if distance matrix
method is used.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

